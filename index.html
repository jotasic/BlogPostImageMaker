<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>
    <title>Blog Post Image Maker</title>
</head>

<body>
    <heder>
        <h2>Simple Blog Post Image Maker</h2>
    </heder>
    <br />

    <!-- text ì„¤ì • ë¶€ë¶„ -->
    <div class="textContentsArea" id="textContentsArea">
        <strong>Text:</strong></br>
        <textarea id="textContents" rows="5" cols="100">Today, I Learned ğŸ¤”</textarea>
    </div>
    <br />

    <!-- ì´ë¯¸ì§€ size ë° ë°±ê·¸ë¼ìš´ë“œ ì»¬ëŸ¬ ì„¤ì •-->
    <div class="imageOptionArea" id="imageOptionArea">
        <label for="canvasWidth">Width:</label>
        <input type="number" id="canvasWidth" value="700"> &nbsp;&nbsp;

        <label for="canvasHeight">Height:</label>
        <input type="number" id="canvasHeight" value="350"> &nbsp;&nbsp;

        <label for="canvasColor">Background:</label>
        <input type="color" id="canvasColor" value="#00C800"></br>

    </div>
    <br />

    <!-- í°íŠ¸ ê´€ë ¨ ì„¤ì • ë¶€ë¶„ -->
    <div class="fontOptionArea" id="fontOptionArea">
        <label for="fontSize">Font Size:</label>
        <input type="number" id="fontSize" value="40"> &nbsp;&nbsp;

        <label for="fontColor">Font Color:</label>
        <input type="color" id="fontColor" value="#FFFFFF">
    </div>
    <br />

    <!-- ë¯¸ë¦¬ë³´ê¸° -->
    <div class="previewArea" id="previewArea">
        <strong>Preview:</strong></br>
        <canvas id="canvasPreview" height="200" width="400">This browser doesn't support canvas ğŸ™…â€â™‚ï¸ </canvas>
        </canvas></br>

        <button disabled>Download</button>
    </div>
    <br/>

    <footer>
        <a href="https://github.com/jotasic/BlogPostImageMaker/">Code</a> â€¢ Made by <a href="https://velog.io/@burnkim61">taewoo kim</a> â€¢ Powered By <a href="https://github.com">Github</a>
    </footer>
</body>

</html>


<script type="application/javascript">
    const canvasWidth = document.getElementById('canvasWidth');
    const canvasHeight = document.getElementById('canvasHeight');
    const canvasColor = document.getElementById('canvasColor');
    const contents = document.getElementById('textContents');

    const fontSize = document.getElementById('fontSize');
    const fontColor = document.getElementById('fontColor');
    const canvas = document.getElementById("canvasPreview");
    const context = canvas.getContext("2d");




    // ê°’ì´ ë³€ê²½ì‹œ updateValue í•¨ìˆ˜ í˜¸ì¶œ í•˜ë„ë¡ ì„¤ì •
    canvasWidth.addEventListener("change", updateValue);
    canvasHeight.addEventListener("change", updateValue);
    canvasColor.addEventListener("change", updateValue);
    contents.addEventListener("change", updateValue);
    fontSize.addEventListener("change", updateValue);
    fontColor.addEventListener("change", updateValue);

    // ì´ë²¤íŠ¸ í•¨ìˆ˜
    function updateValue(e) {
        drawCanvas();
    }

    // í˜ì´ì§€ê°€ ë¡œë“œì‹œ ì‹¤í–‰
    window.onload = function () {
        drawCanvas();
    }


    function drawCanvas() {
        var w = canvasWidth.value;
        var h = canvasHeight.value;
        var c = contents.value;

        console.log(c);

        context.clearRect(0, 0, canvas.width, canvas.height);
        context.beginPath();

        // ìº”ë²„ìŠ¤ ì„¤ì •
        canvas.width = w;
        canvas.height = h;
        context.fillStyle = canvasColor.value;
        context.fillRect(0, 0, w, h);
        context.fill();

        // Text Style ì„¤ì •
        var fontName = "bold " + fontSize.value + "px Arial";
        context.fillStyle = fontColor.value;
        context.font = fontName;
        context.textAlign = "center";
        context.textBaseline = "middle";

        fillTextLine(context, c, w / 2, h / 2, Number(fontSize.value));
    }
    
    function fillTextLine(context, text, x, y, fontSize) {
        var lines = text.split("\n");
        var lineCount = lines.length;

        // ì—¬ë ¤ì¤„ì¼ ì‹œ, ì‹œì‘(ë§¨ ì²«ì¤„) yì¢Œí‘œê°’ì„ ì¡°ì ˆ í•˜ëŠ” ì‘ì—…
        y = y - ((lineCount - 1) * fontSize) / 2;

        for (var i = 0; i < lines.length; i++) {
            context.fillText(lines[i], x, y);
            y += fontSize + fontSize / 10;
        }
    }


</script>